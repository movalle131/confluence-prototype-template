"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useExpandSideNav = useExpandSideNav;
var _react = require("react");
var _tinyInvariant = _interopRequireDefault(require("tiny-invariant"));
var _visibilityContext = require("./visibility-context");
/**
 * __useExpandSideNav__
 *
 * Returns a function that will expand the side nav when called.
 *
 * It will switch the appropriate internal desktop or mobile side nav visibility state based on the current screen size.
 *
 * If you need a function to toggle the side nav, use `useToggleSideNav` instead.
 */
function useExpandSideNav() {
  var setSideNavState = (0, _react.useContext)(_visibilityContext.SetSideNavVisibilityState);
  var expandSideNav = (0, _react.useCallback)(function () {
    var _window$matchMedia = window.matchMedia('(min-width: 64rem)'),
      matches = _window$matchMedia.matches;
    if (matches) {
      setSideNavState(function (currentState) {
        (0, _tinyInvariant.default)(currentState, 'Side nav state should not be null');

        // Skip the re-render if it's a no-op change
        if (currentState.desktop === 'expanded' && currentState.flyout === 'closed') {
          return currentState;
        }
        return {
          mobile: currentState.mobile,
          desktop: 'expanded',
          flyout: 'closed'
        };
      });
    } else {
      setSideNavState(function (currentState) {
        (0, _tinyInvariant.default)(currentState, 'Side nav state should not be null');

        // Skip the re-render if it's a no-op change
        if (currentState.mobile === 'expanded' && currentState.flyout === 'closed') {
          return currentState;
        }
        return {
          desktop: currentState.desktop,
          mobile: 'expanded',
          flyout: 'closed'
        };
      });
    }
  }, [setSideNavState]);
  return expandSideNav;
}